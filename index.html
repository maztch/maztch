<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Maztch</title>
    <link href="style.css" rel="stylesheet" />
  </head>

  <body>
    <div class="container">
      <div class="header">
        <img src="assets/maztch.svg" title="maztch" width="100" height="100" />
        <h3>My site project</h3>
        <h1>Welcome</h1>
        <p>
          This is just a welcome page but more things are comming.
        </p>
        <div style="margin: 12px; padding: 12px; border:1ps solid white;">Pi status: <span id="status"></span></div>
      </div>
    </div>

<script>

var url = 'https://pi.maztch.com';
function setStatus(status){
 var statusElement = document.getElementById('status');
  statusElement.innerHTML = status;
  if (status == 'online'){
    statusElement.style.color = 'green';
  }
  else {
    statusElement.style.color = 'red';
    statusElement.style.cursor = 'pointer';
    statusElement.addEventListener('click', ()=>{
      window.location = url;
    });
  }
}
function ping(url) {
    const xhr = new XMLHttpRequest();  
    xhr.open("GET", url);  
    xhr.onreadystatechange = () => {
       if (xhr.readyState == 4 && xhr.status == 200){
        setStatus('online');
       }
       else {
        setStatus('offline');
       }
    }
    xhr.send();
  }

function ping2() {
    var url = 'https://pi.maztch.com';
    const xhr = new XMLHttpRequest();
    console.log("UNSENT: ", xhr.status);
  
    xhr.open("GET", url);
    console.log("OPENED: ", xhr.status);
  
    xhr.onprogress = () => {
      console.log("LOADING: ", xhr.status);
    };
  
    xhr.onload = () => {
      console.log("DONE: ", xhr.status);
    };
  
    xhr.onreadystatechange = () => {
       if (xhr.readyState == 4 && xhr.status == 200){
        console.log("DONE: ok");
       }
       else if (xhr.readyState == 4 && xhr.status >= 500){
        console.log("DONE: error ", xhr.status);
       }
       else {
        console.log('CHANGE:', xhr.readyState, xhr.status);
       }
    }
    xhr.send();
  }
  
  ping(url);
  </script>

</body>
</html>
